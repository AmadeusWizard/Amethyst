# Amethyst - CircleCI File for CI
# Contributed by Capuccino
version: 2
jobs:
  build:
    docker:
      - image: circleci/python:3.6.1
    working_directory: ~/Amethyst
    steps:
      - checkout
      - run:
          name: Install Dependencies
          command: |
           set -x 
           git clone https://github.com/Rapptz/discord.py --branch rewrite 
           mv discord.py/discord discord
      - run:
          name: Test Source
          command: |
            cloc --exclude-dir=discord --exclude-dir=discord.py . 
            flake8 --exclude=discord,discord.py --show-source --max-line-length 120 . 
            python3 -m compileall -x discord.* .